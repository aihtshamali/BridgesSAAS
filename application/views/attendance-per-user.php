<style type="text/css">

p, div, span, td, a, h1, h2, h3, h4, h5, h6, ul, ol, li, dd, dt, th, tr
{
   font-family: Roboto !important;
}
.u-pd-0{
  padding: 0 !important;
}
.u-tar{
  text-align: right;
}
.tr{
 
}
.tr:last-child{
  
}
.u-bdr-0{
  border-right: 0 !important;
}
.th,.tr{
   display: inline-block;
  /*border: 1px solid #000;*/
  border-right: 0;
}
.th:last-child,
.tr:last-child{
  /*border-right: 1px solid #000;*/
}
.table-custom{
  display: block;
}
.thead{
  font-weight: bold;
}
.fw-n{
 font-weight: normal;
}
.wd-15{
  width: 15%;
}
.wd-70{
  width: 75%;
}
.wd-75-ht0{
  width: 70%;
  height: auto;
}
.h-70{
  height: auto;
}
.h-70 .th{
  height: 70px;
}
.u-tac{
  text-align: center;
}
.img-table{
      width: 40px !important;
    height: 40px;
    transform: translateY(68%);
}
.bg-mid-full-gry{
  background: #e3e3e3;
}
.th,.tr{
  padding: 10px;
}
.wd-70 .th-child,
.wd-70 .tr-child{
    display: inline-block;
    width: calc(98.2%/3);
    height: 100%;
   /* border-right: 1px solid;*/
    padding: 10px;
    overflow: hidden;
}
.fb{
  font-weight: bold !important;
}
.print_dot{
  display: block;
  width: 20px;
  height: 2px;
  background-color: #a09c9c;
  /*border-radius: 50%;*/
  margin-left: 4px;
}
.wd-70 .th-child:after,
.wd-70 .tr-child:after{
  content: '';
  clear: both;
}
.wd-70 .th-child:last-child,
.wd-70 .tr-child:last-child{
  border-right: 0;
}
.tr-row{
  height: 20px;
}
.tr-row .tr{
  border-top: 0;
}
.u-pdr-5{
  padding-right: 5px !important;
}
.payslip .task1-wrapper{
  width: 100% !important;
}
.fi{
  font-style: italic;
}
.lts-0{
  letter-spacing: -2px;
}
.dotted-border{
  border-top: 2px dotted #ccc;
}
.u-mtb-10{
  margin-top: 10px;
  /*margin-bottom: 30px;*/
  width: 98%;
  float: right;
}
.u-pdt-15{
  padding-top: 15px;
}
.bg-green{
  background: green !important;
}
.tr-row1{
  height: 9px;
}
.fs-20{
  font-size: 18px;
}
.top-left{
  margin-left: 3.4% !important; padding-top: 3px;
  }
.img-dv{
  margin-left: 45px;
}
.img-center{
  /*max-width:100%;*/
  vertical-align: middle;
  margin-top: 0px;
  margin-bottom: 2px;
}
.logo-text{
  display: inline-flex;
  width: 50%;
  transform: translateY(-9px);
  margin-left: 57px;
  margin-bottom: -16px;
  font-size: 14px;
}
.img-text{
  display: inline; 
  text-align: center;
}
.pad-top-4{
    margin-top: 15%;
  }
.mgr-left-23{
  margin-left: -23%;
}
.mgr-btm-5{
  margin-bottom: 5px !important;
}
.lh-0{
  line-height:0;
}
.mgr-tp-2{
    margin-top: 1%;
  }
.dot-img{
    height: 45px; width: 100%;
  }
    .remark-height{
    height: 140px !important;
  }
  .wd-12-p{
    width: 12.5% !important;
  }
  .wd-75{
    width: 75% !important;
  }
  .wd-66{
    width: 66% !important;
  }
  .wd-37{
    width: 38% !important;
  }
  .wd-20{
    width: 20.5% !important;
  }
  .wd-20-rcvd{
    width: 20.5% !important;
  }
  .tr-pd-6{
    padding: 0 0 0 50px  !important;
  }
  .icon-block{
    display: block;
  }
  /*.dot_gry{
  display: block;
  width: 4px;
  height: 4px;
  background-color: gray;
  border-radius: 50%;
  float: right;
  
  }*/
  .dot_gry{
    position: relative;
    font-style: italic;

  }
  .dot_gry:before{
    content: '';
    width: 4px;
    height: 4px;
    background: #dbdbdb;
    position: absolute;
    left: -6px;
    top: 2px;
    border-radius: 50%;
  }
  .fs-8{
    font-size: 8px;
  }
  .ht-97{
    height: 110px !important;
  }
  .icon_cut{
    width: 1%;
    margin-top: 2px;
  }
  .ht-20{
    height: 25px;
  }
  .ht-35{
    height: 22px;
  }
  .info{
    width: 35%;
  }
  .img-pd{
    text-align: center;
    padding: 4px 0 4px 64px;
  }
  .ht-55{
    height: 55px;
  }
  .mgr-0{
    margin: 0;
  }
  .pd-wd32{
  font-family: Roboto !important; 
  font-size:14px !important; 
  padding: 9px 0 0 0 !important; 
  width: 32.5%;
}
.bdr-pd{
  border-left: 3px groove; 
  padding-left: 8px;
}
.pd-tp-0{
  padding-top: 0px !important;
}
.fnt-wt{
  font-weight: normal;
}
.bgimg {
    background-image: url('<?php echo base_url(); ?>/assets/images/logo_dull_full.jpg');
}
.ht-115{
  height: 115px !important;
}
.wd33{
  width: 38.5%;
}
.ttl{
  width: 27%; 
  padding: 10px 0px 0 0 !important;
}
.mnth{
  width: 37% !important; text-align: left !important; padding:0 10px 10px 10px !important;
}
.mnth-txt{
  margin-left: 65px !important;
    font-size: 12px !important;
}
.mnth-wd1{
  width: 39% !important;padding: 0px !important; text-align: right !important; float: left !important;
}
.mnth-wd2{
  width: 61% !important;
    padding: 0px 0 0 17px !important;
    text-align: left !important;
    float: left !important;
}
.yr-wd1{
  width: 19% !important; padding-top: 13px !important;
}
.yr-wd2{
  margin-top: 3px !important;
}
.yr-txt{
  position: absolute !important; top: -3px !important; left: -30px !important;font-size: 12px !important;
}
.prpd{
  padding-left: 0px;
}
.aprvd{
  padding-left: 118px;
}
.recvd{
  padding-left: 105px;
}
  @page {
    margin-top: 0mm;
    margin-bottom: 0cm;
     }
@media print{

  body{
    background-color: #eee !important;
    margin-top: 0mm; margin-bottom: 0mm; 
    margin-left: 0mm; margin-right: 0mm;
  }
  .container{
    width: 100%;
    margin:auto;
  }
p, div, span, td, a, h1, h2, h3, h4, h5, h6, ul, ol, li, dd, dt, th, tr
{
   font-family: Roboto !important;
}
  .bg-performance , .performance-table thead tr th {
    background-color: #dbdbdb !important;
  }
  .performance-table tbody tr td {
    background-color: #F7F7F7 !important;
  }
  .tdCustom {
    background-color: #e2dbdb !important;
  }
  .tr-pd-6{
    padding: 0 0 0 100px !important;
  }
  .well{
    background-color: #f5f5f5 !important;
  }
  .fa{
    color: green !important;
  }
  .bg-mid-gry{
    background-color: #f0f0f0 !important;
  }
  .bg-mid-full-gry{
    background-color: #e3e3e3 !important;
  }
  .top-left{
    margin-left: -3% !important; padding-top: 3px;
  }
  .pad-top-4{
    margin-top: 20%;
  }
  
  .mgr-left-23{
    margin-left: -23%;
  }
  .mgr-btm-5{
    margin-bottom: 2px !important;
  }
  .lh-0{
    line-height:0;
  }
  .mgr-tp-2{
    margin-top: 42px;
  }
  .dot-img{
    height: 45px; width: 100%;
  }
  .remark-height{
    height: 100px !important;
  }
  .print_dot{
  display: block !important;
  width: 20px !important;
  height: 2px !important;
  background-color: #a09c9c !important;
  /*border-radius: 50% !important;*/
  margin-left: 4px;
}
.performance-table tr td img {
  width: 9px;
  height: 9px;
}
.logo-text{
  display: inline-flex;
  width: 33%;
  transform: translateY(-9px);
  padding-left: 30px;
  font-size: 14px;
}

.wd-37{
    width: 41% !important;
    /*padding-left: 100px !important;*/
    text-align:right;

  }
  /*.wd-20{
    width: 33% !important;
    padding-left: 3.5%;
  }*/
  .wd-20-rcvd{
    width: 35% !important;
    padding-right: 27px;
    text-align: right;
  }
  .wd-20{
    width: 20.5% !important;
  }
  .icon-block{
    display: block;
  }
  .ht-97{
    height: 110px !important;
  }
  .ht-20{
    /*height: 20%;*/
  }
  .icon_cut{
    width: 1%;
    margin-top: 2px;
  }
  .ht-35{
    height: 22px;
  }
  .img-center{
  /*max-width:100%;*/
  /*vertical-align: middle;*/
  margin-top: 0px;
  margin-bottom: 2px;
}
.img-dv{
  margin-left: 25px;
}
.img-pd{
  text-align: center;
  padding: 4px 0 4px 26px;
}
.ht-55{
  height: 55px;
}
.mgr-0{
  margin: 0;
}
.pd-wd32{
  font-family: Roboto !important; 
  font-size:14px !important; 
  padding: 9px 0 0 0 !important; 
  width: 40%;
}
.bdr-pd{
  border-left: 3px groove; 
  padding-left: 8px;
}
.pd-tp-0{
  padding-top: 0px !important;
}
.fnt-wt{
  font-weight: normal;
}
.bgimg {
    background-image: url('<?php echo base_url(); ?>/assets/images/logo_dull_full.jpg');
}
.ht-115{
  height: 115px !important;
}
.wd33{
  width: 34.2%;
  margin-left: 23.5px;
}
.ttl{
  width: 26.8%; 
  padding: 10px 0 0 0 !important;
}

.mnth{
  width: 37% !important; text-align: left !important; padding:0 10px 10px 10px !important;
}
.mnth-txt{
  margin-left: 35px !important;
    font-size: 12px !important;
}
.mnth-wd1{
  width: 39% !important;padding: 0px !important; text-align: right !important; float: left !important;
}
.mnth-wd2{
  width: 60% !important;
    padding: 0px 0 0 17px !important;
    text-align: left !important;
    float: left !important;
}
.yr-wd1{
  width: 19% !important; padding-top: 13px !important;
}
.yr-wd2{
  margin-top: 3px !important;
}
.yr-txt{
  position: absolute !important; top: -3px !important; left: -30px !important;font-size: 12px !important;
}
.prpd{
  padding-left: 22px;
}
.aprvd{
  padding-left:155px;
}
.recvd{
  padding-left: 55px;
}
}
</style>
<script type="text/javascript">




  //for evaluation 
$( document ).ready(function() {
    /*console.log( "ready!" );*/
  /*   $("tbody").each(function() {
      console.log('aaaa');
        var $this = $(this);
        var newrows = [];
        $this.find("tr").each(function(){
            var i = 0;
            $(this).find("td").each(function(){
                i++;
                if(newrows[i] === undefined) { newrows[i] = $("<tr></tr>"); }
                newrows[i].append($(this));
            });
        });
        $this.find("tr").remove();
        $.each(newrows, function(){
            $this.append(this);
        });
        return false;
    });*/
}); 
    /*  $("table").each(function() {
        var $this = $(this);
        var newrows = [];
        $this.find("tr").each(function(){
            var i = 0;
            $(this).find("td").each(function(){
                i++;
                if(newrows[i] === undefined) { newrows[i] = $("<tr></tr>"); }
                newrows[i].append($(this));
            });
        });
        $this.find("tr").remove();
        $.each(newrows, function(){
            $this.append(this);
        });
        return false;
    });*/

  function TaskEvaluation(userId, role, taskid)
  { 

    $.post("<?php echo base_url();?>"+"taskmanagement/getTaskEvaluation",{userId:userId,role:role,taskid:taskid}, function( response ){

      $(".showEvaluation").html(response);
    });

  }


  //for evaluation 

  //for attendance

  function ShowAttendance(userId)
  { 
    $('#att').unbind("click");
    // empId = 6; 
    // $.ajax({
    //  method: "POST",
    //  cache: false,
    //  url: "../../../taskManagementWithMatrix/ajaxLeadershipReport.php",
    //  data:{"AttendanceEvaluationMain":true, empId:empId,subTaskID:subTaskID},
    //  success: function(ViewHeadingsResponse)
    //  { 
    //    console.log(ViewHeadingsResponse);
    //    $(".ShowAttendance").html(ViewHeadingsResponse);
    //  }
    // });  
    $.post("<?php echo base_url();?>"+"taskmanagement/payslip_getAttendancecurrent",{userId:userId}, function( response )
    {
      $(".ShowAttendance").html(response);
    });
  }
  //for attendance
function userPerformance(userId)
  {
    $('#per').unbind("click");

    $.post("<?php echo base_url();?>"+"Salaryslip/payslip_getUserPerformance",{userId:userId}, function( response )
    {
      $(".ShowPerformance").html(response);
    });
  }
  
/*
  $("#TaskPopup").on("click", function()
  {
    var tID = $("#gettID").val();
    $.post("<?php echo base_url();?>"+"taskmanagement/editTask", {taskId:$("#getTaskId").val()}, function( response ){
      $(".task-div").html(response+'<input type="hidden" name="tID[]" id="gettID" value="'+tID+'">');
    });

  });*/


  //for Performance 


 



  //for Performance 
</script>
<?php
  $d = date("Y-m-t", strtotime("-1 months"));
  $date=@explode("-", $d);
  $maxDays=$date[2];
?>
<div class="container payslip ">
<?php if($userdetails->hired_for_project==2) {?>
  <div class="table-custom fs-10 well u-pd-0 mgr-tp-2">
    <div class="thead bg-light-gry h-70 flexbox" style="height:68px; background: #f5f5f5;">
    <div class="th wd-15 u-tar wd-12-p img-pd">
        <div class="db">
          <div class="">
          <img class="img-center" class="img-table" src="<?php echo base_url()?>/assets/images/red-logo.png" width="40">
          </div>
        </div>
        <div class="db"></div>
        <div class="db"></div>
        <div class="db"></div>
      </div>
      <div class="th wd-70 u-pd-0 ht-97">
        <div class="th-child" style="padding: 10px 0 0 0; width: 42%;"> 
          <div class="bdr-pd fs-14">Performance Evaluation</div>
          <div class="bdr-pd fs-14">Bridges Development Consortium</div>
          <div class="db fw-n"></div>
          <div class="db fw-n"></div>
        </div>
        <div class="th-child u-tac" style="width: 23%;">
        </div>
      </div>
    </div>
  </div>
<?php } else {?>
<div class="table-custom fs-10 well u-pd-0 mgr-tp-2">
    <div class="thead bg-light-gry h-70 flexbox" style="height:68px; background: #f5f5f5;">
    <div class="th wd-15 u-tar wd-12-p img-pd">
        <div class="db">
          <div class="">
          <img class="img-center" class="img-table" src="<?php echo base_url()?>/assets/images/final_logo.jpg" width="40">
          </div>
        </div>
        <div class="db"></div>
        <div class="db"></div>
        <div class="db"></div>
      </div>
      <div class="th wd-70 u-pd-0 ht-97">
        <div class="th-child" style="padding: 10px 0 0 0; width: 42%;"> 
          <div class="bdr-pd fs-14">Performance Evaluation</div>
          <div class="bdr-pd fs-14">Bridges Development Consortium</div>
          <div class="db fw-n"></div>
          <div class="db fw-n"></div>
        </div>
        <div class="th-child u-tac" style="width: 23%;">
        </div>
      </div>
    </div>
  </div>
<?php } ?> 

  <div class="table-custom fs-11 well u-pd-0">
    <div class="thead flexbox">
   
      <div class="th pull-right wd-12-p u-tar">
        <div class="db">Name:</div>
        <div class="db fw-n">Designation:</div>
        <!-- <div class="db fw-n">Level:</div> -->
        <div class="db fw-n">NIC:</div>
        <div class="db fw-n">EmpId:</div>
      </div>
      <div class="th wd-70  u-pd-0">
        <div class="th-child">
          <div class="db"><?= $userdetails->firstname?> <?= $userdetails->lastname?></div>
          <div class="db fw-n"><?= $userdetails->job_title?></div>
          <!-- <div class="db fw-n"><= $userdetails->Level?></div> -->
          <div class="db fw-n"><?=$userdetails->cnic_no?></div>
          <div class="db fw-n"><?= $userdetails->userid?></div>
        </div>
        
        <div class="th-child u-tar u-pdr-5 wd-66">
          <div class="db">Issued on:</div>
          <div class="db">Project:</div>
          <div class="db">Start Date:</div>
          <div class="db">End Date:</div>
        </div>
      </div>
      <div class="th wd-12-p">
          <div class="db"><?php echo  date('d-m-y'); ?></div>
          <div class="db"><?=$userdetails->project_title?></div>
          <div class="db"><?php 
          $prev_date = date("F-y", strtotime("-1 months"));
          echo date('01-m-y', strtotime($prev_date)); ?></div>
          <div class="db"><?php echo date('t-m-y',strtotime($prev_date)); ?></div>
      </div>
    </div>
  </div  
<!-- "" -->
        <div class="ShowPerformance mgr-btm-5"></div>
        <div class="ShowAttendance mgr-btm-5"></div>
  <div class="table-custom fs-10 well u-pd-0">
    
    <div class="tbody h-70">
    
      <div class=" bg-mid-gry  flexbox">
        <div class="tr wd-15 u-tar">
          <div class="db fs-11"></div>
        </div>
        <div class=" wd-75-ht0">
          <div class="db fs-20 u-tac tr-pd-6" >Remarks</div>
        </div>
        <div class="tr wd-15"></div>
      </div>
      
      <div class="tr-row1 bg-mid-full-gry flexbox">
        <div class="tr wd-15 u-tar">
        </div>
          <div class=" fs-11 "></div>
        <div class="tr wd-15"></div>
      </div>
      <div class="tr-row bg-performance  flexbox remark-height">
      
        <div class="th wd-15 u-tar wd-12-p">
            <?php foreach ($comments as $value) {
             echo  date('d-m-Y',strtotime($value->created)) .'<br>'; 
            }
            ?>
        </div>
        <div class="tr " style="width: 34%;">
        <?php foreach ($comments as $value): ?>
         <?= $userdetails->firstname." ".$userdetails->lastname." : " ?> &emsp; &emsp; <?= $value->msg; ?> <br>
        <?php endforeach ?>
        </div>
        <div class="tr wd-15">
            <!-- <img class="img-table" src="<?php echo base_url()?>/assets/images/logo_dull_full.jpg" width="50">  -->
          
        </div>
      </div>
    </div>
  </div>
 </div>
</div>
 <script type="text/javascript">
  window.onload = function() {
  ShowAttendance(<?=$userdetails->userid?>,'1');
  userPerformance(<?=$userdetails->userid?>);
  /**/
     /*$("#tr-table").each(function() {
        var $this = $(this);
        var newrows = [];
        $this.find("tr").each(function(){
            var i = 0;
            $(this).find("td").each(function(){
                i++;
                if(newrows[i] === undefined) { newrows[i] = $("<tr></tr>"); }
                newrows[i].append($(this));
            });
        });
        $this.find("tr").remove();
        $.each(newrows, function(){
            $this.append(this);
        });
    });*/
   /**/
  };
  function PrintDiv(data) {
    var mywindow = window.open();
    var is_chrome = Boolean(mywindow.chrome);
    mywindow.document.write(data);

   if (is_chrome) {
     setTimeout(function() { // wait until all resources loaded 
        mywindow.document.close(); // necessary for IE >= 10
        mywindow.focus(); // necessary for IE >= 10
        mywindow.print(); // change window to winPrint
        mywindow.close(); // change window to winPrint
     }, 250);
   } else {
        mywindow.document.close(); // necessary for IE >= 10
        mywindow.focus(); // necessary for IE >= 10

        mywindow.print();
        mywindow.close();
   }

    return true;
}
 </script>